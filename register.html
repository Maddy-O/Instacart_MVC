<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./styles/login_regis.css">
</head>

<body>
    <div id="mainDiv">

        <div id="firstDiv">

            <p id="loginFont">Sign up</p>
            <p class="last_line" id="top_line">Welcome to Instacar!Enter your email to get started.</p>

            <input type="text" value="" placeholder="Email" class="input_Box" id="email"><br>

            <input type="password" value="" placeholder="Password" class="input_Box" id="password"><br>

            <input type="submit" onclick="register()" id="button" class="input_Box" name="submit">

            </form>

            <hr id="line">
            <p class="last_line">Already have an account?</p>
            <a href="login.html" id="Link">Log in</a>

            </hr>
</body>
<script>
    async function register() {
        try {
            let data = {
                "email": document.querySelector("#email").value,
                "password": document.querySelector("#password").value
            }
            data = JSON.stringify(data);
            let response = await fetch("https://instacart-backend.herokuapp.com/register",{
            method:'POST',
            body:data,
            headers:{
                "Content-Type":"application/json"
            }
        });
        let res = await response.json();
        localStorage.setItem("logged_in",JSON.stringify(res))
        window.location.href = "login.html"
        }
        catch (err) {
            console.log(err)
        }
    }
</script>

</html>